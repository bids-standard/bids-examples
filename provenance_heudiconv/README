# Provenance of DICOM to NIfTI conversion with `heudiconv`

## Goal

This example aims at showing provenance metadata for a DICOM to NIfTI conversion, performed by [`heudiconv`](https://heudiconv.readthedocs.io/en/latest/). Provenance metadata was created manually ; it acts as a guideline for further machine-generated provenance by `heudiconv`. 

## Source data

That the `sourcedata/` directory contains the source dataset (DICOM files) known as [hirni-demo](https://github.com/psychoinformatics-de/hirni-demo).

## Directory tree

After conversion, and adding provenance traces, the directory tree is as follows.

Legend:
* files with a â­ were generated by `heudiconv`;
* files with a âœï¸ were generated manually;
* files with a ğŸ¤– were computed from the manually generated provenance metadata;
* files with â­âœï¸ were generated by `heudiconv` and then edited by hand.

> [!NOTE]
> Note that the `docs/` directory contains explanatory data (see [Provenance as a RDF graph](#provenance-as-a-rdf-graph)) that is not required to encode provenance.

```
.
â”œâ”€â”€ â­ .bidsignore
â”œâ”€â”€ â­ CHANGES
â”œâ”€â”€ â­âœï¸ dataset_description.json
â”œâ”€â”€ â­ .heudiconv/
â”œâ”€â”€ â­ participants.json
â”œâ”€â”€ â­ participants.tsv
â”œâ”€â”€ âœï¸ docs/
â”‚   â”œâ”€â”€ ğŸ¤– prov-heudiconv.jsonld
â”‚   â””â”€â”€ ğŸ¤– prov-heudiconv.png
â”œâ”€â”€ âœï¸ prov/
â”‚   â”œâ”€â”€ âœï¸ prov-heudiconv_act.json
â”‚   â”œâ”€â”€ âœï¸ prov-heudiconv_ent.json
â”‚   â”œâ”€â”€ âœï¸ prov-heudiconv_env.json
â”‚   â””â”€â”€ âœï¸ prov-heudiconv_soft.json
â”œâ”€â”€ â­âœï¸ README
â”œâ”€â”€ â­ scans.json
â”œâ”€â”€ sourcedata/
â”‚   â”œâ”€â”€ hirni-demo
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ â­ README
â””â”€â”€ â­ sub-001/
    â”œâ”€â”€ â­ anat
    â”‚   â”œâ”€â”€ â­ sub-001_run-1_T1w.json
    â”‚   â””â”€â”€ â­ sub-001_run-1_T1w.nii.gz
    â””â”€â”€ â­ sub-001_scans.tsv
```

## Provenance as a RDF graph

Provenance metadata can be aggregated as a JSON-LD RDF graph, which is available in [`docs/prov-heudiconv.jsonld`](docs/prov-heudiconv.jsonld). This is a rendered version of the graph, also available in [`docs/prov-heudiconv.png`](docs/prov-heudiconv.png).

![Rendered version of the RDF graph](docs/prov-heudiconv.png)
